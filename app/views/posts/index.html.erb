<p id="notice"><%= notice %></p>

<div class="container">
	<div class="row">
  		<div class="col-md-8 col-md-offset-2">
          <h1 class="title" style="color:#007981; text-align:center">Search the posts!</h1>
      </div>
	    <div class="col-sm-6 col-sm-offset-3">
    		<div class="card card-form-horizontal">
          <div class="card-content">
    				<%= search_form_for @search, defaults: {wrapper: :inline_field4} do |f| %>
          		<div class="row">
          			<div class="col-md-9">
          				<div class="form-group">
    		        	   <%= f.text_field :title_or_content_or_comments_content_cont, placeholder: 'Keywords', class:"form-control" %>
                  </div>
                </div>
          			<div class="col-md-3">
    						  <%= f.submit "Search", class:"btn btn-primary btn-block" %>
          			</div>
          		</div>
            <% end %>
            </div>
          </div>
      </div>
  </div>
</div>

<div class="card">
  <div class="card-content">
      <div class="table-responsive">
          <table class="table">
              <thead class="text-primary">
                  <tr>
                    <th>Title</th>
                    <th>Course</th>
                    <th>University</th>
                    <th>Post Karma</th>
                    <th>User(karma)</th>
                    <th>Like</th>
                    <th>Dislike</th>
                    <th>Time created</th>
                </tr>
              </thead>
              <tbody>
                <% @posts.each do |post| %>
                  <tr>
                    <td><%= link_to post.title, post %></td>
                    <td><%= post.course.name %></td>
                    <td><%= post.course.university.name %></td>
                    <% if post.user.blank? %>
                        <td>N/A</td>
                        <td>User Deleted</td>
                        <td>N/A</td>
                        <td>N/A</td>
                      <% else %>
                        <td><%= post.get_upvotes.size %> - <%= post.get_downvotes.size %> = <%= post.weighted_score %> </td>
                        <td><%= post.user.email %>(<%= post.user.try(:karma) %>)</td>
                        <td class="td-actions"><%= link_to like_post_path(post), method: :put do %>
                          <i class="material-icons">thumb_up</i><% end %></td>
                        <td class="td-actions"><%= link_to dislike_post_path(post), method: :put do %>
                          <i class="material-icons">thumb_down</i><% end %></td>
                    <% end %>
                    <td><%= time_ago_in_words(post.created_at) + " ago" %></td>
                  </tr>
                <% end %>
              </tbody>
          </table>
      </div>
  </div>
</div>


<br>

<div class="row">
	<div class="col-sm-6 col-sm-offset-3">
    <div class="card">
      <div class="card-content">
        <h4 style="text-align:center">Couldn't find what you are looking for?</h4>
        <div style="text-align:center">
          <%= link_to 'Create a New Post', new_post_path, class:"btn btn-primary btn-round" %>
        </div>
      </div>
    </div>
  </div>
</div>